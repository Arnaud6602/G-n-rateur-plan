<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>G√©n√©rateur Plan Domotique Tuya</title>
<style>
body{font-family:Arial;max-width:900px;margin:auto;background:#f5f7fb;padding:20px}
h1,h2{color:#1e3c72}
input,button{padding:8px;margin:5px}
.card{background:white;padding:15px;border-radius:10px;margin:15px 0;box-shadow:0 2px 6px rgba(0,0,0,.1)}
pre{background:#111;color:#0f0;padding:15px;border-radius:10px;overflow:auto}
</style>
</head>

<body>

<h1>üîß G√©n√©rateur Plan Domotique Tuya</h1>

<div class="card">
<h2>1Ô∏è‚É£ D√©finir les pi√®ces</h2>

<div id="pieces"></div>

<button onclick="addPiece()">‚ûï Ajouter une pi√®ce</button>
<button onclick="generate()">‚öôÔ∏è G√©n√©rer le plan complet</button>
</div>

<div class="card">
<h2>üìã Plan g√©n√©r√©</h2>
<pre id="result"></pre>
</div>

<script>
let count = 0;

function addPiece(){
  count++;
  const div = document.createElement("div");
  div.innerHTML = `
    <b>Pi√®ce ${count}</b> :
    <input placeholder="Nom pi√®ce" id="name${count}">
    <input type="number" placeholder="Nb volets" id="v${count}" min="0">
    <input type="number" placeholder="Nb baies" id="b${count}" min="0">
    <br>
  `;
  document.getElementById("pieces").appendChild(div);
}

function generate(){
  let txt = "";

  txt += "SC√àNES TECHNIQUES (non visibles client)\n\n";

  let idx = 1;

  for(let i=1;i<=count;i++){
    const name = document.getElementById("name"+i).value || "Pi√®ce"+i;
    const v = parseInt(document.getElementById("v"+i).value)||0;
    const b = parseInt(document.getElementById("b"+i).value)||0;

    if(v>0){
      txt += `O${idx} ‚Äî ${name} Ouvrir (${v} volets)\n`;
      txt += `F${idx} ‚Äî ${name} Fermer (${v} volets)\n\n`;
      idx++;
    }

    if(b>0){
      txt += `O${idx} ‚Äî ${name} Baie Ouvrir (${b})\n`;
      txt += `F${idx} ‚Äî ${name} Baie Fermer (${b})\n\n`;
      idx++;
    }
  }

  txt += "\n============================\n\n";

  txt += `SC√àNES CLIENT (boutons visibles)\n
MODE ‚Äî Normal
MODE ‚Äî Vacances
MODE ‚Äî Nuit
MODE ‚Äî T√©l√©
MODE ‚Äî Je pars\n`;

  txt += "\n============================\n\n";

  txt += `MODE ‚Äî T√©l√©

Sc√®ne visible :
	‚Ä¢ MODE ‚Äî T√©l√©

Automatisation :
	‚Ä¢ Si sc√®ne MODE ‚Äî T√©l√© ‚Üí
`;

  for(let i=1;i<idx;i++){
    txt += `‚Üí F${i}\n‚Üí d√©lai 5s\n`;
  }

  txt += "\n----------------------------\n\n";

  txt += `MODE ‚Äî Vacances

Sc√®ne visible :
	‚Ä¢ MODE ‚Äî Vacances

Automatisations :
	‚Ä¢ Lever du soleil ‚Üí `;

  for(let i=1;i<idx;i++) txt += `O${i}, `;

  txt += `\n	‚Ä¢ Coucher du soleil ‚Üí `;

  for(let i=1;i<idx;i++) txt += `F${i}, `;

  txt += `\n\n----------------------------\n\n`;

  txt += `MODE ‚Äî Normal

Automatisations :
	‚Ä¢ Lever soleil ‚Üí toutes sc√®nes O
	‚Ä¢ Coucher soleil ‚Üí toutes sc√®nes F (sauf baie)\n\n`;

  txt += `MODE ‚Äî Nuit

Sc√®ne visible :
	‚Ä¢ MODE ‚Äî Nuit

Automatisation :
	‚Ä¢ Si sc√®ne MODE ‚Äî Nuit ‚Üí fermer TOUS les volets + baie\n\n`;

  txt += `MODE ‚Äî Je pars

Sc√®ne visible :
	‚Ä¢ MODE ‚Äî Je pars

Automatisation :
	‚Ä¢ Si sc√®ne MODE ‚Äî Je pars ‚Üí fermer TOUS les volets + baie\n`;

  document.getElementById("result").textContent = txt;
}
</script>

</body>
</html>
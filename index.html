<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plan Domotique Tuya</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#f4f6fb;
  margin:0;
  padding:15px;
}

h1,h2{color:#1e3c72;margin:5px 0;}

.card{
  background:white;
  border-radius:12px;
  padding:15px;
  margin:15px 0;
  box-shadow:0 3px 8px rgba(0,0,0,0.1);
}

.piece{
  display:grid;
  grid-template-columns: 1fr 80px 80px;
  gap:10px;
  margin-bottom:10px;
}

input{
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:16px;
}

button{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  background:#1e3c72;
  color:white;
  font-size:16px;
  margin-top:10px;
}

pre{
  background:#111;
  color:#0f0;
  padding:15px;
  border-radius:12px;
  overflow:auto;
  font-size:14px;
}

.label{
  font-size:13px;
  color:#555;
  margin-top:4px;
}
</style>
</head>

<body>

<h1>üîß G√©n√©rateur Domotique Tuya</h1>

<div class="card">
<h2>1Ô∏è‚É£ Configuration de la maison</h2>

<div id="pieces"></div>

<button onclick="addPiece()">‚ûï Ajouter une pi√®ce</button>
<button onclick="generate()">‚öôÔ∏è G√©n√©rer le plan complet</button>
</div>

<div class="card">
<h2>üìã Plan g√©n√©r√©</h2>
<pre id="result"></pre>
</div>

<script>
let count=0;

function addPiece(){
  count++;
  const div=document.createElement("div");
  div.className="piece";
  div.innerHTML=`
    <input placeholder="Nom de la pi√®ce" id="name${count}">
    <input type="number" placeholder="Volets" id="v${count}" min="0">
    <input type="number" placeholder="Baies" id="b${count}" min="0">
  `;
  document.getElementById("pieces").appendChild(div);
}

function generate(){
  let txt="";

  txt+="SC√àNES TECHNIQUES (non visibles client)\n\n";

  let idx=1;

  for(let i=1;i<=count;i++){
    const n=document.getElementById("name"+i).value || "Pi√®ce "+i;
    const v=parseInt(document.getElementById("v"+i).value)||0;
    const b=parseInt(document.getElementById("b"+i).value)||0;

    if(v>0){
      txt+=`O${idx} ‚Äî ${n} Ouvrir (${v} volets)\n`;
      txt+=`F${idx} ‚Äî ${n} Fermer (${v} volets)\n\n`;
      idx++;
    }

    if(b>0){
      txt+=`O${idx} ‚Äî ${n} Baie Ouvrir (${b})\n`;
      txt+=`F${idx} ‚Äî ${n} Baie Fermer (${b})\n\n`;
      idx++;
    }
  }

  txt+="==============================\n\n";

  txt+="SC√àNES CLIENT (boutons visibles)\n\n";
  txt+="MODE ‚Äî Normal\nMODE ‚Äî Vacances\nMODE ‚Äî Nuit / Je pars\n\n";

  txt+="==============================\n\n";

  txt+="MODE ‚Äî Normal\n\n";
  txt+="Automatisations :\n";
  txt+="‚Ä¢ Lever du soleil ‚Üí ";

  for(let i=1;i<idx;i++) txt+=`O${i}, `;
  txt+="\n";

  txt+="‚Ä¢ Coucher du soleil ‚Üí ";
  for(let i=1;i<idx;i++) txt+=`F${i}, `;
  txt+="(SAUF baie)\n\n";

  txt+="------------------------------\n\n";

  txt+="MODE ‚Äî Vacances\n\n";
  txt+="Automatisations :\n";
  txt+="‚Ä¢ Lever du soleil ‚Üí ";
  for(let i=1;i<idx;i++) txt+=`O${i}, `;
  txt+="\n";

  txt+="‚Ä¢ Coucher du soleil ‚Üí ";
  for(let i=1;i<idx;i++) txt+=`F${i}, `;
  txt+="(TOUT fermer)\n\n";

  txt+="------------------------------\n\n";

  txt+="MODE ‚Äî Nuit / Je pars\n\n";
  txt+="Sc√®ne visible : MODE ‚Äî Nuit / Je pars\n";
  txt+="Automatisation :\n";
  txt+="‚Ä¢ Si sc√®ne activ√©e ‚Üí ";

  for(let i=1;i<idx;i++) txt+=`F${i}, `;
  txt+="(fermeture imm√©diate totale)\n";

  document.getElementById("result").textContent=txt;
}
</script>

</body>
</html>